<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Baby Log</title>
        <script src="https://unpkg.com/d3@7"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="container">
            <h2>Baby Daily Log</h2>

            <!-- Buttons will be dynamically generated here -->

            <div class="card">
                <input
                    type="text"
                    id="notes"
                    placeholder="Notes - type and press Enter"
                />
                <small id="laststamp" class="timestamp">Not yet saved</small>
            </div>

            <div style="display: flex; gap: 8px">
                <button class="btn" id="undo" onclick="undo()">Delete</button>
                <button class="btn" id="undelete" onclick="undelete()" style="background: #4caf50;">Undelete</button>
                <div style="flex: 1"></div>
                <button class="btn" id="download" onclick="downloadCSV()">
                    Download CSV
                </button>
            </div>

            <div id="daily-report">
                <h3>Daily Report</h3>

                <div id="date-selector">
                    <button onclick="changeReportDate(-1)">◀ Prev</button>
                    <input
                        type="date"
                        id="report-date"
                        onchange="setReportDate(this.value)"
                    />
                    <button onclick="changeReportDate(1)">Next ▶</button>
                    <button onclick="goToToday()">
                        Today
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="label">Total Sleep</div>
                        <div class="value" id="stat-sleep">0h 0m</div>
                    </div>
                    <div class="stat-card">
                        <div class="label">Feeds</div>
                        <div class="value" id="stat-feeds">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="label">Wet Nappies</div>
                        <div class="value" id="stat-wet">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="label">Dirty Nappies</div>
                        <div class="value" id="stat-dirty">0</div>
                    </div>
                </div>

                <h4 style="font-size: 14px; margin: 16px 0 8px 0; color: #666">
                    Hourly Activity
                </h4>
                <div class="hourly-grid" id="hourly-grid">
                    <!-- Will be populated by JS -->
                </div>

                <div id="timeline-chart"></div>

                <div class="sleep-attempts">
                    <h4>Sleep Attempts</h4>
                    <div class="attempt-list" id="sleep-attempts-list">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <div class="recent-events">
                    <h4>Recent Events</h4>
                    <div class="event-list" id="recent-events-list">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <div
            id="time-picker-modal"
            class="modal-overlay"
            onclick="if(event.target === this) hideTimePicker()"
        >
            <div class="modal">
                <h3>Select Time</h3>
                <input type="datetime-local" id="custom-time" />
                <div class="modal-buttons">
                    <button class="cancel" onclick="hideTimePicker()">
                        Cancel
                    </button>
                    <button class="confirm" onclick="saveWithCustomTime()">
                        Save
                    </button>
                </div>
            </div>
        </div>

        <script type="module" src="js/app.js"></script>
    </body>
</html>